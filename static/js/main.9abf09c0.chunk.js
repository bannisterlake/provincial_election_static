(this["webpackJsonpelections-provincial"]=this["webpackJsonpelections-provincial"]||[]).push([[0],{264:function(e,t,a){},265:function(e,t,a){},29:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(43),i=a(13),c=a(0),r=a(26),o=a(1),s=Object(c.createContext)(null),l={full:null,party:null,declaration:null,config:null,counter:0};t.b=function(e){var t=Object(c.useState)(l),a=Object(i.a)(t,2),d=a[0],j=a[1],f=Object(r.f)(),u=f.prov,b=f.year;return Object(c.useEffect)((function(){console.log("data context"),function(){var e=b||"2020",t=u||"nb";Promise.all([fetch("data/".concat(t,"/data/").concat(e,"/").concat(t,"_ridingResults.json")).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("error fetching riding results")})),fetch("data/".concat(t,"/data/").concat(e,"/").concat(t,"_partyResults.json")).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("error fetching party results")})),fetch("data/".concat(t,"/data/").concat(e,"/").concat(t,"_declaration.json")).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("error fetching declaration results")})),fetch("data/".concat(t,"/data/").concat(e,"/").concat(t,"_config.json")).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("Please add election config")}))]).then((function(e){j((function(t){return Object(n.a)(Object(n.a)({},t),{},{type:"SET_INITIAL",full:e[0],party:e[1],declaration:e[2],config:e[3]})}))})).catch((function(e){console.log("error",e)}))}()}),[]),Object(c.useEffect)((function(){var e;return d.config&&(console.log("updating every "+(d.config.timer?d.config.timer:3e4)+"ms"),e=setInterval((function(){!function(){var e=b||"2020",t=u||"nb";console.log("fetching data"),Promise.all([fetch("data/".concat(t,"/data/").concat(e,"/").concat(t,"_ridingResults.json"),{cache:"no-cache"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("error fetching riding results")})),fetch("data/".concat(t,"/data/").concat(e,"/").concat(t,"_partyResults.json"),{cache:"no-cache"}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){alert("error fetching party results")})),fetch("data/".concat(t,"/data/").concat(e,"/").concat(t,"_declaration.json"),{cache:"no-cache"}).then((function(e){return e.json()})).catch((function(e){alert("error fetching declaration results")}))]).then((function(e){j((function(t){return Object(n.a)(Object(n.a)({},t),{},{type:"SET_INITIAL",full:e[0],party:e[1],declaration:e[2]})}))})).catch((function(e){console.log("error",e)}))}()}),d.config.timer?d.config.timer:3e4)),function(){clearInterval(e)}}),[d.config]),Object(o.jsx)(s.Provider,{value:{data:d},children:e.children})}},437:function(e,t,a){},438:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(25),r=a.n(c),o=(a(264),a(13)),s=(a(265),a(47)),l=a(26),d=a(481),j=a(490),f=a(485),u=a(484),b=a(93),p=a(468),h=a(29),x=a(43),g=a(119),O=a(1),m=["color","votes"],v=Object(p.a)({meter:function(e){return{width:"100%",position:"relative",marginTop:14}},bar:{background:function(e){return e.color},width:function(e){return e.votes},borderRadius:"0px 5px 5px 0px",height:5,margin:1},majorityLine:{position:"absolute",height:"120%",bottom:-2,borderLeft:function(e){return e.small?"1px solid black":"2px solid black"}},majorityLabel:function(e){return{position:"absolute",marginTop:e.small?-14:-18,paddingRight:5,fontSize:12,fontWeight:"bolder",transform:"translate(-7px, -1px)"}}});function y(e){e.color,e.votes;var t=Object(g.a)(e,m),a=v(e);return Object(O.jsx)("div",Object(x.a)({className:a.bar},t))}var N=function(e){var t=Object(n.useState)(25),a=Object(o.a)(t,2),i=a[0],c=a[1],r=Object(n.useState)(0),s=Object(o.a)(r,2),l=(s[0],s[1],Object(n.useState)(50)),d=Object(o.a)(l,2),j=d[0],f=d[1],u=Object(n.useState)(0),b=Object(o.a)(u,2),p=(b[0],b[1],v(e));return Object(n.useEffect)((function(){if(e.data){var t=e.data.partyResults[0];t.seats>=e.majority?(c(t.seats),f(e.majority/t.seats*100)):(c(e.majority),f(e.majority/e.majority*100))}}),[e.data,e.seatTotal,e.majority]),Object(O.jsxs)("div",{className:p.meter,children:[Object(O.jsx)("div",{className:p.majorityLabel,style:{left:"".concat(j,"%"),top:0},children:e.majority}),e.data&&e.data.partyResults.map((function(e,t){if(t<4)return Object(O.jsx)(y,{color:e.color,votes:e.seats>0?"".concat(e.seats/i*100,"%"):"2%"},t)})),Object(O.jsx)("div",{className:p.majorityLine,style:{left:"".concat(j,"%")}})]})},w=Object(p.a)({seatApp:{height:250,position:"relative",backgroundColor:"#ededf0",padding:10},main:{display:"flex",position:"relative",flexDirection:"column",height:"100%"},left:{flex:4},titleRow:{display:"flex",flex:"1",paddingBottom:5,justifyContent:"space-between"},title:function(e){return{fontSize:e.small?18:24,fontWeight:"bold",paddingRight:20}},majorityMeter:function(e){return{display:"flex",alignItems:"center",textAlign:"right",fontSize:12,flex:1}},declarationText:{paddingTop:5,"& #party":{fontWeight:"bold"},"& #majority":{fontSize:14}},seatContainer:{flex:"3",position:"relative",overflow:"hidden",flexGrow:3},seatMap:{display:"flex",flexDirection:"column-reverse",flexWrap:"wrap",height:"100%",position:"relative"},partyMap:{display:"flex",flex:"2",justifyContent:"flex-start",padding:"5px 0px",overflowX:"auto"},seat:{height:"15%",margin:"0.1%",flexShrink:1,paddingBottom:5},partyContainer:{flex:1,width:"20%",paddingTop:5,display:"flex",alignItems:"center",fontWeight:"bold",fontSize:14,letterSpacing:2,padding:"5px 5px",margin:1,borderRadius:5,color:"white",justifyItems:"center",justifyContent:"space-between","& #partySeatsTotal":{fontSize:18}},popVote:{padding:"5px 0px",fontWeight:"bold",fontSize:20},update:{fontSize:10}});function S(){var e=Object(n.useContext)(h.a).data,t=Object(n.useState)([]),a=Object(o.a)(t,2),i=a[0],c=a[1],r=Object(n.useState)([]),s=Object(o.a)(r,2),l=s[0],d=s[1],j=w(),f=new Date;Object(n.useEffect)((function(){if(e.party){var t=0;if(c([]),d([]),e.party.partyResults.map((function(a,n){for(var i=function(e){t++,c((function(t){return[].concat(Object(b.a)(t),[{party:a.nameShort,id:e,color:a.color}])}))},r=0;r<a.seats;r++)i(r);n<=e.party.partyResults.length-1&&n>4&&!a.seats||d((function(e){return[].concat(Object(b.a)(e),[{partyName:a.nameShort,id:n,seats:a.seats,color:a.color,votesPercent:a.votesPercent,votesTotal:a.votes}])}))})),t<e.config.seats)for(var a=function(e){c((function(t){return[].concat(Object(b.a)(t),[{party:"none",id:e,color:"#e0e0e0"}])}))},n=0;n<e.config.seats-t;n++)a(n)}}),[e]);var u=function(e){return console.log("seat"),Object(O.jsx)("div",{className:j.seat,style:{backgroundColor:e.color}},"".concat(e.party,"-").concat(e.el))},p=function(){var t,a,n=!1;return e.party.partyResults[0].seats>e.party.partyResults[1].seats&&(t=e.party.partyResults[0].name,n=!0),e.declaration.overallResult.resultText&&(a="elected "+e.declaration.overallResult.resultText),Object(O.jsxs)("div",{id:"declarationText",className:j.declarationText,children:[n&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("span",{id:"party",children:[t,"s"]}),Object(O.jsx)("span",{id:"helpertext",children:" leading "}),a&&Object(O.jsx)("span",{children:"and elected"}),Object(O.jsx)("span",{children:" - "})]}),Object(O.jsxs)("span",{id:"majority",children:[e.config.majority," seats needed for majority"]})]})},x=function(e){var t=e.party;return Object(O.jsxs)("div",{id:"partyCard",className:j.partyContainer,style:{backgroundColor:t.color},children:[Object(O.jsx)("div",{children:t.partyName}),Object(O.jsxs)("div",{id:"popVote",className:j.popVote,children:[" ",t.seats," "]})]},t.id)};return Object(O.jsx)("div",{className:j.seatApp,children:e.party&&i&&l&&Object(O.jsxs)("div",{className:j.main,children:[Object(O.jsxs)("div",{className:j.titleRow,id:"widgetTitleRow",children:[Object(O.jsxs)("div",{className:j.left,children:[Object(O.jsx)("div",{id:"widgetTitle",className:j.title,children:e.config.title}),Object(O.jsx)(p,{})]}),Object(O.jsx)("div",{className:j.majorityMeter,children:Object(O.jsx)(N,{seatTotal:e.config.total,majority:e.config.majority,majorityPercent:e.config.majority/e.config.total*100,data:e.party})})]}),Object(O.jsx)("div",{className:j.seatContainer,children:Object(O.jsxs)("div",{className:j.seatMap,children:[console.log(i),i.map((function(e,t){return Object(O.jsx)(u,{party:e.party,el:e.id,color:e.color},e.party+"-"+t)}))]})}),Object(O.jsx)("div",{className:j.partyMap,children:l.map((function(e){return Object(O.jsx)(x,{party:e},e.id)}))}),Object(O.jsxs)("div",{className:j.update,children:["Last updated: ",f&&f.toString()]})]})})}var C,R=a(473),D=a(488),z=a(247),T=a(242),L=a(118),W=(a(270),Object(p.a)({partyContainer:function(e){return{backgroundColor:e.party.color,padding:5,maxHeight:40,margin:3,borderRadius:5,color:"white",fontWeight:"bold",letterSpacing:1,display:"flex",justifyContent:"space-between"}}})),I=function(e){var t=W(e);return Object(O.jsxs)("div",{className:t.partyContainer,children:[Object(O.jsx)("div",{children:e.party.nameShort}),Object(O.jsxs)("div",{children:[e.result>0&&"+",e.result]})]})},k=a(41),B=Object(p.a)({partyContainer:(C={alignItems:"center",height:25,margin:3,position:"relative",width:"80%",color:"black",fontWeight:"bold",letterSpacing:1,display:"flex"},Object(k.a)(C,"position","relative"),Object(k.a)(C,"justifyContent","space-between"),Object(k.a)(C,"borderBottom","1px solid black"),Object(k.a)(C,"& #minus",{position:"absolute",left:function(e){return e.small?-10:-15},fontWeight:"bolder"}),Object(k.a)(C,"& #plus",{position:"absolute",right:function(e){return e.small?-10:-15},fontWeight:"bolder"}),C),gainsBar:{backgroundColor:function(e){return e.color},position:"absolute",bottom:0,right:function(e){return e.width<=0&&"50%"},left:function(e){return e.width>0&&"50%"},height:"60%",borderWidth:"1px",borderStyle:"solid",borderColor:function(e){return e.color},margin:0,padding:0,transition:"width 300ms ease-in-out",transitionDelay:"100ms"}}),P=function(e){var t=B(e),a=Object(n.useState)(0),i=Object(o.a)(a,2),c=i[0],r=i[1];return Object(n.useEffect)((function(){r(e.width)}),[e]),Object(O.jsxs)("div",{className:t.partyContainer,children:[Object(O.jsx)("div",{id:"minus",children:"-"}),Object(O.jsx)("div",{style:{width:"".concat(Math.abs(c),"%")},className:t.gainsBar}),Object(O.jsx)("div",{id:"plus",children:"+"})]})},A=Object(p.a)({gainsDiv:{flex:function(e){return e.small?4:5},display:"flex",flexDirection:"column",alignItems:"center",position:"relative",justifyContent:"center"},centerBar:{position:"absolute",borderLeft:"1px solid black",left:"50%",height:"97%",zIndex:20}}),E=function(e){var t=Object(n.useState)(0),a=Object(o.a)(t,2),i=a[0],c=a[1],r=A(e);return Object(n.useEffect)((function(){var t=0;e.data&&(e.data.partyResults.forEach((function(e){Math.abs(e.seatChange)>t&&(t=Math.abs(e.seatChange))})),c(t))}),[e.data]),Object(O.jsxs)("div",{className:r.gainsDiv,children:[Object(O.jsx)("div",{className:r.centerBar}),e.data&&e.data.partyResults.map((function(t,a){var n=0;return 0!==i&&(n=t.seatChange/(i+1)*100),e.data.partyResults.length>6?a<5||a===e.data.partyResults.length-1?Object(O.jsx)(P,{color:t.color,small:e.small,width:"".concat(n/2)},a):void 0:Object(O.jsx)(P,{color:t.color,small:e.small,width:"".concat(n/2)},a)}))]})},F=a(123),M=a.n(F),H=Object(p.a)({root:{display:"flex",alignItems:"center",paddingBottom:5,fontWeight:"bolder",alignSelf:"flex-start",fontSize:14,paddingLeft:5,"& svg":{color:"green",fontSize:20,paddingRight:5}}}),G=function(e){var t=H();return Object(O.jsxs)("div",{className:e.declarationText&&t.root,children:[Object(O.jsx)(M.a,{color:"green"}),e.declarationText]})},V=a(472),_=a(439),X=Object(p.a)({main:{fontSize:function(e){return e.small&&12},display:"flex",position:"relative",flexDirection:"column",padding:5,backgroundColor:"#ededf0",alignContent:"center",height:260},topDiv:{display:"flex",justifyContent:"space-between",borderBottom:"1px solid grey"},declarationDiv:{flex:2,alignSelf:"center"},tabDiv:{display:"flex",flex:2,visibility:"hidden","& #tab":{background:"#9e9e9e",color:"white",flex:1,fontSize:9,borderBottomRightRadius:0,borderBottomLeftRadius:0,padding:5,border:"1px solid black",borderBottomColor:"transparent"},"& #active":{background:"#ededf0",color:"black",flex:1,fontSize:9,borderBottomRightRadius:0,borderBottomLeftRadius:0,boxShadow:"0px 2px 0px -1px #ededf0",padding:5,border:"1px solid black",borderBottomColor:"#ededf0"}},content:{display:"flex",flexDirection:"row",padding:"5px 0px",flexGrow:1},left:{flex:3,alignItems:"center"},right:{flex:3,maxHeight:"100%"},title:{fontWeight:"bold",marginLeft:5,fontSize:function(e){return e.small?16:18}},border:{borderRight:"1px solid grey",marginRight:10},chartHolder:{display:"flex",flexDirection:"row",height:"100%",alignItems:"center",position:"relative"},partyBars:{flex:2,alignSelf:"center"},chartDiv:{padding:"0 10px",flex:2,height:"100%",width:"100%"},update:{paddingTop:5,fontSize:12}});function J(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],i=t[1],c=Object(n.useState)(window.innerWidth>600?"":"gains"),r=Object(o.a)(c,2),s=r[0],l=r[1],d=X(),j=0,f=Object(n.useContext)(h.a).data;Object(n.useEffect)((function(){try{if(f.party)if(f.declaration.overallResult.partyName&&f.declaration.overallResult.resultText){var e=f.declaration.overallResult.partyName+" "+f.declaration.overallResult.resultText;if(e===a)return;i(e)}else i("")}catch(t){}}),[f]);var u=function(e){var t=e.active,a=e.payload;e.label;return t&&a&&a.length?Object(O.jsxs)("div",{className:"tooltip-wrapper",children:[Object(O.jsx)("strong",{className:"tooltip-name",children:a[0].name}),Object(O.jsxs)("span",{children:[a[0].value.toLocaleString("en")," votes"]})]}):null};return Object(O.jsxs)("div",{id:"graphWidget-main",className:d.main,children:[Object(O.jsxs)("div",{className:d.topDiv,children:[Object(O.jsx)("div",{className:d.declarationDiv,children:a&&Object(O.jsx)(G,{declarationText:a})}),Object(O.jsxs)(V.a,{className:d.tabDiv,id:"tabDiv",children:[Object(O.jsx)(_.a,{onClick:function(){return l("gains")},id:"gains"===s?"active":"tab",children:"Pop. Vote"}),Object(O.jsx)(_.a,{onClick:function(){return l("chart")},id:"chart"===s?"active":"tab",children:"Gains/Losses"})]})]}),Object(O.jsxs)("div",{className:d.content,children:[Object(O.jsxs)("div",{className:d.left,style:{display:"chart"===s?"none":"initial"},children:[Object(O.jsx)("div",{className:d.title,children:"Popular vote"}),Object(O.jsxs)("div",{className:d.chartHolder,children:[Object(O.jsx)("div",{className:d.partyBars,children:f.party&&f.party.partyResults.map((function(e,t){return f.party.partyResults.length>6?t<5?(j+=e.votesPercent,Object(O.jsx)(I,{party:e,result:"".concat(e.votesPercent,"%")},t)):t===f.party.partyResults.length-1?Object(O.jsx)(I,{party:{nameShort:"OTH",color:"#c0c0c0"},result:"".concat(j?(100-j).toFixed(1):0,"%")},t):void 0:Object(O.jsx)(I,{party:e,result:"".concat(e.votesPercent,"%")},t)}))}),Object(O.jsx)("div",{className:d.chartDiv,children:f.party&&Object(O.jsx)(R.a,{height:200,width:"100%",children:f.party.partyResults[0].votes?Object(O.jsxs)(D.a,{children:[Object(O.jsx)(z.a,{data:f.party.partyResults,fill:"#8884d8",paddingAngle:2,dataKey:"votes",children:f.party.partyResults.map((function(e,t){return Object(O.jsx)(T.a,{fill:e.color},"cell-".concat(t))}))}),Object(O.jsx)(L.a,{content:Object(O.jsx)(u,{})})]}):Object(O.jsxs)(D.a,{children:[Object(O.jsx)(z.a,{data:[{name:"No Results",value:100}],startAngle:90,endAngle:450,children:Object(O.jsx)(T.a,{fill:"grey"})}),Object(O.jsx)(L.a,{position:{x:0,y:-10},content:Object(O.jsx)("div",{className:"tooltip-wrapper",children:Object(O.jsx)("strong",{children:"No Results"})})})]})})})]})]}),!s&&Object(O.jsx)("div",{className:d.border,id:"chartBorder"}),Object(O.jsxs)("div",{className:d.right,id:"gainslosses",style:{display:"gains"===s?"none":"initial"},children:[Object(O.jsx)("div",{className:d.title,children:"Gains/Losses"}),Object(O.jsxs)("div",{className:d.chartHolder,children:[Object(O.jsx)("div",{className:d.partyBars,children:f.party&&f.party.partyResults.map((function(e,t){return f.party.partyResults.length>6?t<5?Object(O.jsx)(I,{party:e,result:"".concat(e.seatChange)},t):t===f.party.partyResults.length-1?Object(O.jsx)(I,{party:{nameShort:"OTH",color:"#c0c0c0"},result:"".concat(e.seatChange)},t):void 0:Object(O.jsx)(I,{party:e,result:"".concat(e.seatChange)},t)}))}),Object(O.jsx)(E,{data:f.party})]})]})]})]})}var K=["color","votes"],Y=Object(p.a)({meter:{maxWidth:"95%",position:"relative",minHeight:"20px"},bar:{background:function(e){return e.color},width:"0%",borderRadius:"0px 5px 5px 0px",height:10,margin:2,animationName:"animate-bar",animationDuration:"0.5s",transition:"width 300ms ease-in-out",transitionDelay:"100ms",zIndex:20},majorityLine:{position:"absolute",height:"120%",minHeight:"20px",bottom:-2,borderLeft:"2px solid black",transition:"left 300ms ease-in-out"},majorityLabel:{position:"absolute",textAlign:"left",top:-25,marginLeft:-7,fontWeight:"bolder",transition:"right 300ms ease-in-out"}});function q(e){e.color;var t=e.votes,a=Object(g.a)(e,K),n=Y(e);return Object(O.jsx)("div",Object(x.a)({className:"animate-bar ".concat(n.bar),style:{width:t}},a))}var Q=function(e){var t=Object(n.useContext)(h.a).data,a=Object(n.useState)(null),i=Object(o.a)(a,2),c=i[0],r=i[1],s=Object(n.useState)(50),l=Object(o.a)(s,2),d=l[0],j=l[1],f=Y(e);return Object(n.useEffect)((function(){if(console.log("barchart",t),t){var a=e.data.partyResults[0];a.seats>=e.majority?(r(a.seats),j(e.majority/a.seats*100)):(r(e.majority),j(e.majority/e.majority*100))}}),[e.data,e.seatTotal,e.majority]),Object(O.jsxs)("div",{className:f.meter,children:[Object(O.jsxs)("div",{className:f.majorityLabel,style:{right:"".concat(100-d,"%")},children:[e.majority," ",window.screen.availWidth>250&&"seats needed for majority"]}),t&&c&&e.data.partyResults.map((function(e,t){if(e.seats)return Object(O.jsx)(q,{color:e.color,votes:e.seats>0?"".concat(e.seats/c*100,"%"):"0.5%"},t)})),Object(O.jsx)("div",{className:f.majorityLine,style:{left:"".concat(d,"%")}})]})},U=Object(p.a)({barchartApp:{height:250,position:"relative"},main:{height:"100%",display:"flex",position:"relative",flexDirection:"column",padding:"10px 10px",backgroundColor:"#ededf0"},titleRow:{flex:2,display:"flex",padding:"0px 5px 5px 5px",justifyContent:"space-between"},title:{fontSize:24,fontWeight:"bold"},declarationText:{paddingTop:5,"& #party":{fontWeight:"bold"},"& #majority":{fontSize:14}},barchart:{fontSize:14,display:"flex",padding:"15px 0px 10px 0px",flexDirection:"column-reverse",flexWrap:"wrap",flex:3},partyMap:{fontSize:16,display:"flex",flex:2,alignContent:"left",overflowX:"auto",maxHeight:52},update:{fontSize:10,padding:"5px 0px 0px 5px"},partyContainer:{width:"20%",paddingTop:5,display:"flex",alignItems:"center",fontWeight:"bold",fontSize:14,letterSpacing:2,padding:"5px 5px",margin:1,borderRadius:5,color:"white",justifyItems:"center",justifyContent:"space-between"},popVote:{fontWeight:"bold",fontSize:14}});function Z(){var e=Object(n.useContext)(h.a).data,t=U(),a=Object(n.useState)([]),i=Object(o.a)(a,2),c=i[0],r=i[1];Object(n.useEffect)((function(){if(e.party){r([]),e.party.partyResults.map((function(e,t){r((function(a){return[].concat(Object(b.a)(a),[{partyName:e.nameShort,id:t,seats:e.seats,color:e.color,votesPercent:e.votesPercent,votesTotal:e.votes}])}))}))}}),[e]);var s,l=function(e){var a=e.party;return Object(O.jsxs)("div",{id:"partyCard",className:t.partyContainer,style:{backgroundColor:a.color},children:[Object(O.jsx)("div",{children:a.partyName}),Object(O.jsxs)("div",{id:"popVote",className:t.popVote,children:[" ",a.seats," "]})]},a.id)},d=function(){var a,n,i=!1;return e.party.partyResults[0].seats>e.party.partyResults[1].seats&&(a=e.party.partyResults[0].name,i=!0),e.declaration.overallResult.resultText&&(n="elected "+e.declaration.overallResult.resultText),Object(O.jsxs)("div",{id:"declarationText",className:t.declarationText,children:[i&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("span",{id:"party",children:[a,"s"]}),Object(O.jsx)("span",{id:"helpertext",children:" leading "}),n&&Object(O.jsx)("span",{children:"and elected"}),Object(O.jsx)("span",{children:" - "})]}),Object(O.jsxs)("span",{id:"majority",children:[e.config.majority," seats needed for majority"]})]})};return Object(O.jsx)("div",{className:t.barchartApp,children:e.party&&Object(O.jsxs)("div",{className:t.main,children:[Object(O.jsx)("div",{className:t.titleRow,children:Object(O.jsxs)("div",{className:t.left,children:[Object(O.jsx)("div",{id:"widgetTitle",className:t.title,children:e.config.title}),Object(O.jsx)(d,{})]})}),Object(O.jsx)("div",{className:t.barchart,children:Object(O.jsx)(Q,{seatTotal:e.config.seats,majority:e.config.majority,majorityPercent:e.config.majority/e.config.seats*100,data:e.party})}),Object(O.jsx)("div",{className:t.partyMap,children:c.map((function(e){return Object(O.jsx)(l,{party:e},e.id)}))}),Object(O.jsxs)("div",{className:t.update,children:["Last updated: ",(s=e.party.generated,new Date(s).toString().split(" ").slice(1,5).join(" "))]})]})})}a(437);function $(){return Object(O.jsxs)("div",{className:"lds-ring",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})}var ee,te=a(489),ae=a(479),ne=a(480),ie=a(440),ce=a(245),re=a.n(ce),oe=Object(p.a)({dialogRoot:{height:"100%",overflow:"hidden",display:"flex",flexDirection:"column",position:"relative","& ul":{overflow:"auto",height:"100%"}},resultsList:{height:"100%",overflow:"auto",flexGrow:1},candidateRoot:{position:"relative",display:"flex",flexDirection:"row",height:120,padding:10},header:{display:"flex",justifyContent:"space-between",padding:10,fontFamily:"Arial","& .dialogTitle":{fontSize:24}},resultsInfo:{display:"flex",alignItems:"center",justifyContent:"space-between","& #pollsReported":{fontSize:12,fontWeight:"bolder"},"& #totalVotes":{fontSize:10,color:"darkslategrey"}},imageDiv:{height:"100%",position:"relative",minWidth:50,width:function(e){return e.screensize<700?50:70},borderRadius:"8px",overflow:"hidden","& #partyCode":{position:"absolute",bottom:8,color:"white",width:"100%",textAlign:"center"},"& img":{width:"100%",transition:"width 500ms"}},candidateLeftDiv:{flex:3,display:"flex",flexDirection:"column",alignSelf:"flex-start",padding:"10px 0 10px 10px","& #candidateIncumbent":{fontSize:13,fontWeight:"lighter"}},candidateName:{fontWeight:"bolder"},candidateRightDiv:{flex:2,justifySelf:"flex-end",display:"flex",flexDirection:"column",height:"80%",justifyContent:"space-between","& #candidateElected":{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:function(e){return e.screensize<700?12:14}}},votesDiv:{textAlign:"right",display:"flex",justifyContent:"space-between",flexDirection:"column",flexGrow:1,"& #votesPercent":{fontSize:22,fontWeight:"bolder"},"& #votesTotal":{fontSize:function(e){return e.screensize<700?12:14},fontWeight:"lighter"}},polls:{fontSize:16,fontWeight:100}});function se(e){var t=e.results,a=e.handleClose,n=e.getColor,i=e.open,c=oe();return Object(O.jsx)(te.a,{open:i,onClose:a,children:Object(O.jsxs)("div",{className:c.dialogRoot,children:[Object(O.jsxs)("div",{className:c.header,children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"dialogTitle",children:t.name}),Object(O.jsxs)("div",{className:c.polls,children:[t.pollsReported,"/",t.pollsTotal," polls reporting"]})]}),Object(O.jsx)(ae.a,{"aria-label":"close",className:c.closeButton,onClick:a,children:Object(O.jsx)(re.a,{})})]}),Object(O.jsx)("div",{className:c.resultsList,children:Object(O.jsx)(ne.a,{children:t.results.map((function(e){var t=n(e);return Object(O.jsxs)(ie.a,{className:c.candidateRoot,children:[Object(O.jsx)("div",{style:{backgroundColor:t.color},className:c.imageDiv,children:Object(O.jsx)("div",{id:"partyCode",style:{fontWeight:"bolder",color:"#C0C0C0"===t.color?"black":"white"},children:e.partyCode})}),Object(O.jsxs)("div",{className:c.candidateLeftDiv,children:[Object(O.jsx)("div",{className:c.candidateName,children:Object(O.jsx)("div",{id:"candidateLast",children:e.name})}),Object(O.jsx)("div",{id:"candidateIncumbent",children:e.isIncumbent&&"Incumbent"})]}),Object(O.jsxs)("div",{className:c.candidateRightDiv,children:[Object(O.jsxs)("div",{className:c.votesDiv,children:[Object(O.jsxs)("div",{id:"votesPercent",children:[e.percent,"%"]}),Object(O.jsxs)("div",{id:"votesTotal",children:[e.votes.toLocaleString("en")," total votes"]})]}),e.isElected?Object(O.jsxs)("div",{id:"candidateElected",children:[Object(O.jsx)(M.a,{style:{paddingRight:5,fontSize:14,color:"green"}})," Elected"]}):Object(O.jsx)("div",{style:{fontSize:14}})]})]})}))})})]})})}var le=Object(p.a)({resultsRoot:(ee={display:"flex",padding:"0px 5px"},Object(k.a)(ee,"display","flex"),Object(k.a)(ee,"flexDirection","column"),ee),title:{textTransform:"uppercase",fontFamily:"Arial",paddingLeft:5,paddingBottom:10},candidateContainer:{display:"flex",flexDirection:"column"},candidateRoot:{position:"relative",display:"flex",flexDirection:"row",padding:"10px 0",cursor:"pointer"},resultsInfo:{display:"flex",alignItems:"center",justifyContent:"space-between","& #pollsReported":{fontSize:12,fontWeight:"bolder"},"& #totalVotes":{fontSize:10,color:"darkslategrey"}},imageDiv:{height:function(e){return e.screensize<700?100:120},position:"relative",marginBottom:25,minWidth:50,width:function(e){return e.screensize<700?50:70},borderRadius:"8px",overflow:"hidden","& #partyCode":{position:"absolute",bottom:8,color:"white",width:"100%",textAlign:"center"},"& img":{width:"100%",transition:"width 500ms"}},candidateLeftDiv:{flex:3,display:"flex",flexDirection:"column",justifyContent:"space-between","& #candidateRiding":{flex:1,fontSize:24,fontWeight:"lighter"}},candidateName:{flex:3,display:"flex",flexDirection:"column",justifyContent:"center","& #candidateName":{fontWeight:"bolder",fontSize:22},"& #candidateParty":{fontSize:24,fontWeight:"bold"}},candidateRightDiv:{flex:2,justifySelf:"flex-end",display:"flex",flexDirection:"column",paddingLeft:"10px",justifyContent:"space-between","& #pollsDiv":{textAlign:"right"},"& #candidateElected":{display:"flex",alignItems:"center",justifyContent:"flex-end",fontSize:function(e){return e.screensize<700?12:14}}},votesDiv:{textAlign:"right",display:"flex",justifyContent:"center",flexDirection:"column",flexGrow:1,"& #votesLabel":{fontSize:function(e){return e.screensize<700?16:22},fontWeight:"bolder"},"& #votesTotal":{fontSize:function(e){return e.screensize<700?12:14},fontWeight:"lighter"}}});var de=function(e){var t=e.results,a=e.filter,i=le(),c=Object(n.useState)(""),r=Object(o.a)(c,2),s=r[0],l=r[1],d=Object(n.useState)(!1),j=Object(o.a)(d,2),f=j[0],u=j[1],b=Object(n.useContext)(h.a).data,p=function(e){var t=e.partyCode,a=b.party.partyResults.find((function(e){return e.nameShort===t}));return a||{color:"#C0C0C0",name:"Other",nameShort:"OTH"}};return Object(O.jsxs)("div",{className:i.resultsRoot,children:[Object(O.jsx)("div",{className:i.title,children:a}),Object(O.jsx)("div",{className:i.candidateContainer,children:a&&t.data.map((function(e){var t=p(e);return Object(O.jsxs)("div",{id:"filteredCandidate",className:i.candidateRoot,onClick:function(){return function(e){var t=b.full.data.find((function(t){return t.name===e}));console.log(e,t),l(t),u(!0)}(e.riding)},children:[Object(O.jsxs)("div",{className:i.candidateLeftDiv,children:[Object(O.jsx)("div",{id:"candidateRiding",children:e.riding}),Object(O.jsxs)("div",{className:i.candidateName,children:[Object(O.jsx)("div",{id:"candidateName",children:e.firstName+" "+e.lastName}),Object(O.jsx)("div",{id:"candidateParty",style:{color:t.color},children:e.partyCode})]})]}),Object(O.jsxs)("div",{className:i.candidateRightDiv,children:[Object(O.jsx)("div",{id:"pollsDiv",children:Object(O.jsxs)("div",{children:[e.pollsReported,"/",e.pollsTotal," polls reporting"]})}),Object(O.jsx)("div",{className:i.votesDiv,children:Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{id:"votesLabel",children:"Leading By: "}),Object(O.jsxs)("div",{children:[e.lead," votes"]}),Object(O.jsxs)("div",{children:[e.leadPercent,"%"]})]})}),e.isElected?Object(O.jsx)("div",{id:"candidateElected"}):Object(O.jsx)("div",{style:{fontSize:14}})]})]})}))}),s&&Object(O.jsx)(se,{getColor:p,results:s,open:f,handleClose:function(){return u(!1)}})]})},je=Object(p.a)({root:{width:"100%",display:"flex",height:"100%",overflow:"hidden",flexDirection:"column",fontFamily:"Arial"},title:{background:"#9e9e9e",padding:10,fontSize:24,color:"white"},selectContainer:{width:200,padding:20},formControl:{width:"100%"},main:{overflow:"auto",flexGrow:1},resultsContainer:{overflowY:"auto",overflowX:"hidden"}});var fe=function(){var e=Object(n.useContext)(h.a).data,t=Object(n.useState)(null),a=Object(o.a)(t,2),i=a[0],c=a[1],r=Object(n.useState)(null),s=Object(o.a)(r,2),b=s[0],p=s[1],g=Object(n.useState)(!1),m=Object(o.a)(g,2),v=(m[0],m[1],je()),y=Object(l.f)(),N=y.prov,w=y.year,S=y.loadfilter,C=function(e){c(e)},R=function(e){if(console.log("getData",e),e.length>0){var t=e.map((function(e){return fetch("data/".concat(N,"/data/").concat(w,"/filtered/").concat(e.filename)).then((function(e){return e.json()}))}));Promise.all(t).then((function(t){console.log("res",t),t.forEach((function(t,a){p((function(n){return Object(x.a)(Object(x.a)({},n),{},Object(k.a)({},"".concat(e[a].label),t))}))}))}))}};Object(n.useEffect)((function(){if(console.log("get Results",e.config),e.config&&(R(e.config.filteredResults),setInterval((function(){R(e.config.filteredResults)}),e.config.timer),S)){console.log(S);var t=e.config.filteredResults.find((function(e){return e.urlSlug.toLowerCase()===S.toLowerCase()}));console.log("test?",t),t&&(console.log(t.label),C(t.label))}return function(){clearInterval(undefined)}}),[e.config]);var D=function(){return console.log("here",b[i]),b[i]?Object(O.jsx)(de,{results:b[i]&&b[i],filter:i}):Object(O.jsx)("p",{style:{paddingLeft:20},children:"Select Filter to view Results"})};return e.config?Object(O.jsxs)("div",{className:v.root,children:[Object(O.jsx)("div",{className:v.title,children:"Filtered Results"}),b?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{className:v.selectContainer,children:Object(O.jsxs)(d.a,{className:v.formControl,children:[Object(O.jsx)(j.a,{shrink:!!i,children:"Filter"}),Object(O.jsx)(f.a,{value:i,onChange:function(e){return C(e.target.value)},children:e.config.filteredResults.map((function(e){return Object(O.jsx)(u.a,{value:e.label,children:e.label})}))})]})}),Object(O.jsx)("div",{className:v.resultsContainer,children:b&&Object(O.jsx)(D,{})})]}):Object(O.jsx)("div",{style:{padding:20},children:"Filtered results not available for current election"})]}):Object(O.jsx)($,{})},ue=i.a.lazy((function(){return Promise.all([a.e(3),a.e(4)]).then(a.bind(null,530))})),be=i.a.lazy((function(){return a.e(5).then(a.bind(null,533))})),pe=function(){var e=Object(n.useState)({prov:"nb",year:2020}),t=Object(o.a)(e,2),a=t[0],i=t[1];return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"electionSelect",children:Object(O.jsxs)(d.a,{className:"electionSelect",children:[Object(O.jsx)(j.a,{id:"demo-simple-select-label",children:"Select Election"}),Object(O.jsx)(f.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:a,onChange:function(e){return i(e.target.value)},children:window.CONFIG.elections.map((function(e){return Object(O.jsxs)(u.a,{value:e,children:[e.prov," - ",e.year]})}))})]})}),Object(O.jsx)("div",{children:Object(O.jsxs)("ul",{children:[Object(O.jsx)("li",{children:Object(O.jsx)(s.b,{to:"/",children:"Home"})}),Object(O.jsx)("li",{children:Object(O.jsx)(s.b,{to:"/map/".concat(a.prov,"/").concat(a.year),children:"Map App"})}),Object(O.jsx)("li",{children:Object(O.jsx)(s.b,{to:"/barchart/".concat(a.prov,"/").concat(a.year),children:"Barchart App"})}),Object(O.jsx)("li",{children:Object(O.jsx)(s.b,{to:"/graph/".concat(a.prov,"/").concat(a.year),children:"Graph App"})}),Object(O.jsx)("li",{children:Object(O.jsx)(s.b,{to:"/seat/".concat(a.prov,"/").concat(a.year),children:"Seat App"})}),Object(O.jsx)("li",{children:Object(O.jsx)(s.b,{to:"/instantarticle/".concat(a.prov,"/").concat(a.year),children:"Instant Article"})}),Object(O.jsx)("li",{children:Object(O.jsx)(s.b,{to:"/filteredResults/".concat(a.prov,"/").concat(a.year),children:"Playlist Results"})})]})})]})},he=function(){return Object(O.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(O.jsx)("div",{style:{width:"100%"},children:Object(O.jsx)(be,{})}),Object(O.jsx)("div",{style:{flexGrow:"1",width:"100%",position:"relative",overflow:"auto"},children:Object(O.jsx)(ue,{showBanner:!1})})]})},xe=function(){return Object(O.jsx)(s.a,{children:Object(O.jsxs)(l.c,{children:[Object(O.jsx)(l.a,{exact:!0,path:"/",children:Object(O.jsx)(pe,{})}),Object(O.jsx)(l.a,{path:"/map/:prov/:year/:riding?",children:Object(O.jsx)(n.Suspense,{fallback:Object(O.jsx)("div",{children:"Loading.."}),children:Object(O.jsx)(h.b,{children:Object(O.jsx)(ue,{showBanner:!0})})})}),Object(O.jsx)(l.a,{path:"/seat/:prov/:year?",children:Object(O.jsx)(h.b,{children:Object(O.jsx)(S,{})})}),Object(O.jsx)(l.a,{path:"/graph/:prov/:year?",children:Object(O.jsx)(h.b,{children:Object(O.jsx)(J,{})})}),Object(O.jsx)(l.a,{path:"/barchart/:prov/:year?",children:Object(O.jsx)(h.b,{children:Object(O.jsx)(Z,{})})}),Object(O.jsx)(l.a,{path:"/filteredResults/:prov/:year/:loadfilter?",children:Object(O.jsx)(h.b,{children:Object(O.jsx)(fe,{})})}),Object(O.jsx)(l.a,{path:"/instantarticle/:prov/:year?",children:Object(O.jsx)(n.Suspense,{fallback:Object(O.jsx)("div",{children:"Loading.."}),children:Object(O.jsx)(h.b,{children:Object(O.jsx)(he,{})})})})]})})},ge=function(e){e&&e instanceof Function&&a.e(6).then(a.bind(null,528)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),i(e),c(e),r(e)}))};r.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)(xe,{})}),document.getElementById("root")),ge()}},[[438,1,2]]]);
//# sourceMappingURL=main.9abf09c0.chunk.js.map